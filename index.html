<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mand12 Cards</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="spacer"></div>
    <div id="brand" class="brand right" title="Mand12 Cards">Mand12 Cards</div>
  </header>

  <main class="page">
    <!-- Login -->
    <section id="login" class="panel">
      <div class="panel-header">
        <h1>Welcome</h1>
        <p class="muted">Enter your student ID to continue</p>
      </div>
      <div class="panel-body">
        <div class="input-row">
          <input type="text" id="userId" placeholder="Mand####" autocomplete="off" />
          <button id="startBtn" class="primary">Continue ‚Üí</button>
        </div>
        <p class="muted small" style="margin-top:8px">Students: use your Mand#### ID</p>
      </div>
    </section>

    <!-- Teacher Panel (private) -->
    <section id="teacherPanel" class="panel" style="display:none;">
      <div class="panel-header row">
        <div>
          <div class="muted small">Signed in as</div>
          <div id="whoTeacher" class="who">Teacher</div>
        </div>
        <div class="spacer"></div>
        <button id="logoutBtnTeacher" class="text-btn">Sign out</button>
      </div>

      <div class="tabs" style="margin-bottom:8px">
        <button class="tab active" data-tab="t-dashboard">Dashboard</button>
        <button class="tab" data-tab="t-import">Import Decks</button>
      </div>

      <div id="t-dashboard" class="tab-panel">
        <div id="teacherSummary" class="stats-grid"></div>
        <h3>Students</h3>
        <div id="studentsList" class="sessions-list"></div>
      </div>

      <div id="t-import" class="tab-panel hidden">
        <h3>Import HSK Decks from JSON</h3>
        <p class="muted">Use JSON exports converted from PDFs or other sources.</p>
        <div class="input-row">
          <input id="fileHsk2" type="file" accept="application/json" />
          <button id="btnImportHsk2" class="primary">Import HSK 2</button>
        </div>
        <div class="input-row" style="margin-top:8px">
          <input id="fileHsk3" type="file" accept="application/json" />
          <button id="btnImportHsk3" class="primary">Import HSK 3</button>
        </div>
        <hr style="margin:16px 0; opacity:.3" />
        <h3>Paste & Convert</h3>
        <p class="muted small">Paste tab-separated: Chinese<TAB>Pinyin<TAB>English</p>
        <textarea id="pasteBox" rows="8" style="width:100%;" placeholder="ÊØîÂ¶Ç\tb«êr√∫\tfor example"></textarea>
        <div class="input-row">
          <button id="btnConvertHsk2" class="outline">Replace HSK 2 with pasted list</button>
          <button id="btnConvertHsk3" class="outline">Replace HSK 3 with pasted list</button>
        </div>
      </div>
    </section>

    <!-- Deck select -->
    <section id="deckSelectPanel" class="panel" style="display:none;">
      <div class="panel-header row">
        <div>
          <div class="muted small">Signed in as</div>
          <div id="who" class="who"></div>
        </div>
        <div class="spacer"></div>
        <button id="logoutBtn" class="text-btn">Sign out</button>
      </div>
      <div class="deck-grid">
        <button class="deck-btn" data-deck="HSK2"><span class="title">HSK 2</span></button>
        <button class="deck-btn" data-deck="HSK3"><span class="title">HSK 3</span></button>
        <button class="deck-btn full" data-deck="Full"><span class="title">Full (empty)</span></button>
      </div>
    </section>

    <!-- Review -->
    <section id="review" class="panel" style="display:none;">
      <div class="panel-header row">
        <button id="backToDecks" class="text-btn">‚Üê Decks</button>
        <div class="muted small">Deck</div>
        <strong id="deckName" class="who"></strong>
        <div class="spacer"></div>
        <div class="muted small" id="dueCount" title="Cards remaining today">0 left</div>
        <button id="settingsBtn" class="icon-btn" title="Deck settings" aria-label="Deck settings">‚öôÔ∏è</button>
      </div>

      <div class="flashcard" id="flashcard" tabindex="0" aria-live="polite" aria-label="Flashcard. Click or press Space to flip">
        <div class="flashcard-inner" id="flashcardInner">
          <div class="flashcard-face front" id="cardFront">Front</div>
          <div class="flashcard-face back" id="cardBack">Back</div>
        </div>
      </div>

      <div class="controls center wrap" id="flipRow">
        <button id="flipBtn" class="primary lg" title="Flip (Space)">Flip ‚§æ</button>
      </div>

      <div class="controls center wrap hidden" id="rateRow">
        <button id="againBtn" class="rate rate-again xl" title="1 = Again">Again</button>
        <button id="hardBtn"  class="rate rate-hard  xl" title="2 = Hard">Hard</button>
        <button id="goodBtn"  class="rate rate-good  xl" title="3 = Good">Good</button>
        <button id="easyBtn"  class="rate rate-easy  xl" title="4 = Easy">Easy</button>
        <button id="endSessionBtn" class="outline" title="End session & save">End Session & Save</button>
      </div>

      <div id="emptyState" class="empty hidden">
        <h3>All caught up üéâ</h3>
        <p class="muted">You're done for today for this deck. Come back tomorrow, add new cards, or view stats via ‚öôÔ∏è.</p>
      </div>
    </section>
  </main>

  <!-- Settings Modal (user deck config) -->
  <div id="settingsModal" class="modal" aria-hidden="true" role="dialog">
    <div class="modal-backdrop"></div>
    <div class="modal-card">
      <div class="modal-header">
        <strong>Deck Settings</strong>
        <div>
          <button id="exportDeckBtn" class="outline">Export JSON</button>
          <label for="importDeckFile" class="outline" style="margin-left:6px; padding:8px 12px; display:inline-block; cursor:pointer;">Import JSON</label>
          <input id="importDeckFile" type="file" accept="application/json" style="display:none;" />
          <button id="closeSettingsBtn" class="text-btn" aria-label="Close">‚úï</button>
        </div>
      </div>
      <div class="tabs">
        <button class="tab active" data-tab="m-manage">Manage Cards</button>
        <button class="tab" data-tab="m-stats">Stats</button>
      </div>
      <div class="modal-body">
        <div id="m-manage" class="tab-panel">
          <div class="add-row">
            <input id="addHanzi" placeholder="Chinese (Ê±âÂ≠ó)" />
            <input id="addPinyin" placeholder="Pinyin (tone marks)" />
            <div class="input-row">
              <input id="addEnglish" placeholder="English" />
              <button id="addCardBtn" class="primary">Add</button>
            </div>
          </div>
          <div class="input-row" style="margin-bottom:10px; align-items:center;">
            <label class="small"><input type="checkbox" id="addToToday" /> Add new cards to today's queue now</label>
            <div class="spacer"></div>
            <button id="resetProgressBtn" class="outline" title="Clear scheduling for this deck">Reset Progress</button>
          </div>
          <div id="cardsList" class="cards-list"></div>
        </div>
        <div id="m-stats" class="tab-panel hidden">
          <div class="stats-grid" id="statsGrid"></div>
          <div id="statsNote" class="muted small" style="margin-top:8px"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Admin Login Modal (hidden trigger) -->
  <div id="adminModal" class="modal" aria-hidden="true" role="dialog">
    <div class="modal-backdrop"></div>
    <div class="modal-card" style="max-width:420px">
      <div class="modal-header">
        <strong>Admin Sign-in</strong>
        <button id="closeAdminBtn" class="text-btn" aria-label="Close">‚úï</button>
      </div>
      <div class="modal-body">
        <p class="muted small">Enter admin passcode.</p>
        <div class="input-row">
          <input id="adminCode" type="password" placeholder="Passcode" autocomplete="off" />
          <button id="adminLoginBtn" class="primary">Sign in</button>
        </div>
      </div>
    </div>
  </div>

  <footer class="footer">
    <span class="muted small">Keyboard: Space=Flip ¬∑ 1=Again ¬∑ 2=Hard ¬∑ 3=Good ¬∑ 4=Easy</span>
  </footer>

  <script src="script.js"></script>
</body>
</html>
